package ejercicio0120;

import java.io.EOFException;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.List;
import java.util.Scanner;

/**
 * Pide al usuario nuevos datos de amigos (nombre, edad, e-mail, comentarios), 
 * mostrar todos los existentes (sólo nombre) 
 * o buscar (en nombre, e-mail, y comentarios, independientemente de mayúsculas, 
 * y mostrando todos los datos). 
 * Cada vez que se añada un amigo, se guardarán sus datos en fichero, 
 * usando serialización. Cada vez que se vuelva a entrar al programa, 
 * se cargarán los datos existentes.
 * 
 * @author Javi
 *
 */
public class Ejercicio0120 {

	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		byte opcion;
		boolean salirMenu;
		
		do {
			mostrarMenu();
			System.out.println();
			System.out.print("Selecciona una opcion: ");
			opcion = recogerOpcion(sc);
			
			switch (opcion) {
				case 1: anyadirPersona(); break;
				case 2: verNombres(); break;
				case 3: buscar(); break;
				case 0: salirMenu = salir(); break;
			}
			
		}while (!salirMenu);		
		
	}
	
	private static void Serializar(List<Persona> listaPersonas) 
		throws FileNotFoundException, IOException{
			FileOutputStream ficheroSalida = new FileOutputStream(
					new File("personas.dat"));
			ObjectOutputStream oos = new ObjectOutputStream(ficheroSalida);
			
			oos.writeObject(listaPersonas);					
	}
	
	private static List<Persona> Deserializar(List<Persona> listaPersonas)
		throws FileNotFoundException, IOException, EOFException, 
		ClassNotFoundException {
		
		File fichero = new File("personas.dat");
		FileInputStream fis = new FileInputStream(fichero);
		ObjectInputStream ois = new ObjectInputStream(fis);
		
		return listaPersonas = (List<Persona>)ois.readObject();
	}
		
	private static void mostrarMenu() {
		System.out.println("1. Añadir una persona");
		System.out.println("2. Ver nombres de todos");
		System.out.println("3. Buscar");
		System.out.println("0. Salir");
	}
	
	private static byte recogerOpcion(Scanner sc) {
		return sc.nextByte();
	}
	
	private static boolean salirMenu() {
		return true;
	}
}

