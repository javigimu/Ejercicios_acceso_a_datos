package ejercicio0113;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

/**
 * Parte en trozos de un tama√±o prefijado un fichero pedido al usuario
 * @author Javi
 *
 */
public class Ejercicio0113 {

	public static void main(String[] args) {
		int tamanyoTrozo = 512; // 512 bytes
		Scanner sc = new Scanner(System.in);
		String nombreFichero;
		
		System.out.print("Nombre del fichero a trocear: ");
		nombreFichero = sc.nextLine();
		
		if (new File(nombreFichero).exists()) {
			File fichero = new File(nombreFichero);
			
			try (InputStream fIn = new FileInputStream(fichero)){
				int cantidadLeida;
				int numeroDeTrozos = (int)fichero.length() / tamanyoTrozo;
				List<byte[]> listaDatos = new ArrayList<>();
				byte[] datos = new byte[tamanyoTrozo];
				
				while ((cantidadLeida = fIn.read(datos, 0, tamanyoTrozo)) > 0) {
					listaDatos.add(datos);
				}
				
				for (byte[] dato : listaDatos) {
					for (byte d : dato)
						System.out.print(d + " ");
					System.out.println();
				}
				
			} catch (IOException ioe) {
				System.err.println("Error de lectura: " + ioe.getMessage());
			} catch (Exception e) {
				e.printStackTrace();
			}
			
		}else {
			System.out.println("El fichero no existe");
		}

	}

}
